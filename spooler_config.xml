<?xml version="1.0" encoding="iso-8859-1"?>

<!-- $Id: spooler_config.xml,v 1.1 2001/01/02 10:49:02 jz Exp $   (C) 2000 SOS GmbH Berlin -->

<!DOCTYPE spooler_config SYSTEM "spooler_config.dtd">

<spooler_config>

    <object_set_classes>
        <object_set_class name="Dokumente">
            <level_decls>
                <level_decl>
                    <level>100</level>
                    <level_description>Beauftragt</level_description>
                </level_decl>
                <level_decl>
                    <level>200</level>
                    <level_description>Aufbereitet</level_description>
                </level_decl>
                <level_decl>
                    <level>300</level>
                    <level_description>Gedruckt</level_description>
                </level_decl>
            </level_decls>
            <script>

class Testobjekt
    sub construct( record )
        level = 0
        inhalt = record.a
    end sub

    sub process( level )
        inhalt = inhalt &amp; " (" &amp; level &amp; ")"
        storage.put_line inhalt
    end sub

    dim level
    dim inhalt
    dim storage
end class


class Object_set_class
    property get spooler_eof()
        eof=file.eof
    end property
end class

dim file
dim storage
set object_set = new Object_set_class


sub spooler_open()
    set file = createobject( "hostware.file" )
    file.open "-in -type=(a:text(50)) tab | inline eins zwei drei"

    set storage = createobject( "hostware.file" )
    storage.open "-out c:\tmp\1.txt"
end sub


sub spooler_close()
    file.close
    set file=nothing
end sub


function spooler_get()
    if file.eof then exit function

    set result = new Testobjekt
    result.construct file.get()
    set result.storage = storage

    set spooler_get = result
end function

function spooler_make_object_set
    set spooler_make_object_set = new Object_set_class
end function

            </script>
        </object_set_class>
    </object_set_classes>

    <jobs>
        <job name="Aufbereiten">
            <object_set>
                <object_set_class.name>Dokumente</object_set_class.name>
                <levels>
                    <low_level><level>100</level></low_level>
                    <high_level><level>200</level></high_level>
                </levels>
            </object_set>
            <output_level><level>100</level></output_level>
        </job>
    </jobs>

</spooler_config>
