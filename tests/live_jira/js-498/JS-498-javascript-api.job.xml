<?xml version="1.0" encoding="ISO-8859-1"?>

<job title="Testjob (javascript)"
     order="yes">
    <script language="javax.script:javascript">
        <![CDATA[
var cnt;        
function spooler_init() {
	cnt = 0;
   logger.info( "spooler_init wurde gerufen" );
   return true;
}

function spooler_open() {
   logger.info( "spooler_open wurde gerufen" );
   return true;
}

// spooler_process wird so lange gerufen, bis false zurück gegeben wird
function spooler_process() {
   if (cnt < 5) {
      cnt++;
      logger.info( "spooler_process wurde JETZT gerufen (" + cnt + ")" );
      return true;
   }
   return false;
}

function spooler_close() {
   logger.info( "spooler_close wurde gerufen" );
}

function spooler_on_success() {
   logger.info( "spooler_on_success wurde gerufen" );
}

function spooler_exit() {
   logger.info( "spooler_exit wurde gerufen" );
}

function spooler_on_error() {
	logger.error( "es ist ein Fehler aufgetreten: " + spooler_task.error );
}
        ]]>
    </script>
    <run_time/>
</job>
