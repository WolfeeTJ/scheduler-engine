<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="scheduler.xslt" type="text/xsl"?>


<!--$Id: konfiguration.xml,v 1.6 2004/08/30 10:13:52 jz Exp $-->

<description 
    title    = "XML-Konfiguration" 
    base_dir = "."
    author   = "$Author: jz $"
    date     = "$Date: 2004/08/30 10:13:52 $"
>
<p>
    Beim Start des Scheduler geben Sie die Datei an,
    die die in XML formulierte Konfiguration enthält.
</p>

<p class="example">
    Beispiel
</p>

<p>
    Eine einfache Konfigurationsdatei mit einem Job in JavaScript (für Windows):
</p>
<!--
<p>
    Die <code>DOCTYPE</code>-Zeile ist optional. Hier ist die jeweils aktuelle DTD eingestellt
</p>
-->    
<pre>

&lt;?xml version="1.0" encoding="iso-8859-1"?><!--&lt;!DOCTYPE spooler SYSTEM "http://zsch.de/sos/scheduler/scheduler.dtd">-->
&lt;spooler>
    &lt;config>
        &lt;process_classes/>
        &lt;jobs>
            &lt;job name="test_job">
                &lt;script language="JavaScript">&lt;![CDATA[

                    function spooler_process()
                    {
                        spooler_log.info( "Hallo Welt!" );
                        return false;
                    }
                    
                ]]&gt;&lt;/script>

                &lt;run_time repeat="10"/>
            &lt;/job>
        &lt;/jobs>
    &lt;/config>
&lt;/spooler>
</pre>

<p>
    Konfiguriert ist hier der Job test_job, den der Scheduler alle 10 Sekunden wiederholen wird. Wenn diese Konfiguration 
    in der Datei <code>hallo_welt.xml</code> abgelegt ist, können sie den Scheduler so starten:
</p>

<pre>

scheduler hallo_welt.xml
</pre>

<p>
    Sie können den Scheduler mit Ctrl-C abbbrechen.
</p>


<h2>Schema der Konfiguration</h2>

<p>
    Der Scheduler prüft die XML-Konfiguration gegen eine DTD.
    Die DTD können Sie sich mit der Kommandozeilenoption <scheduler_option name="show-dtd"/> ausgeben lassen.
</p>

<p>
    Klicken Sie auf ein Element des Schemas, um dessen Beschreibung zu sehen.
</p>

<pre>

&lt;<a class="silent" href="xml/spooler.xml">spooler</a>>
    &lt;<a class="silent" href="xml/config.xml">config</a> spooler_id      = ""
            tcp_port        = "4444"
            udp_port        = "4444"
            param           = "…"
            log_dir         = "…"
            include_path    = "…"
            priority_max    = "1000"
            java_class_path = "…"
            java_options    = "…"    >

        &lt;<a class="silent" href="xml/base.xml">base</a> file="…"/>

        &lt;<a class="silent" href="xml/holidays.xml">holidays</a>>
            &lt;<a class="silent" href="xml/holiday.xml">holiday</a> day="…"/>
            …
        &lt;/holiday>

        &lt;<a class="silent" href="xml/process_classes.xml">process_classes></a>
            &lt;<a class="silent" href="xml/process_class.xml">process_class</a> name          = "…"
                           max_processes = "…"
                           spooler_id    = "…"/>
            …
        &lt;/process_classes>

        &lt;<a class="silent" href="xml/security.xml">security</a>>
            &lt;<a class="silent" href="xml/allowed_host.xml">allowed_host</a> name="…" level="…"/>
            …
        &lt;/security>

        &lt;<a class="silent" href="xml/script.xml">script</a> language   = "…"
                java_class = "…"
                com_class  = "…"
                filename   = "…" >
            &lt;<a class="silent" href="xml/include.xml">include</a> file="…"/>
            &lt;![CDATA[
                <i>programm-code</i>… 
            ]]&gt;
        &lt;/script>

        &lt;<a class="silent" href="xml/jobs.xml">jobs</a>
            &lt;<a class="silent" href="xml/job.xml">job</a> name          = "…"
                 spooler_id    = "…"
                 title         = "…"
                 log_append    = "no"
                 order         = "no"
                 process_class = "…"
                 tasks         = "1"
                 timeout       = "…" 
                 idle_timeout  = "…" 
                 priority      = "1"   >

                 &lt;<a class="silent" href="xml/description.xml">description</a>> … &lt;/description>

                 &lt;<a class="silent" href="xml/params.xml">params</a>>
                     &lt;<a class="silent" href="xml/param.xml">param</a> name="…" value="…"/>
                     …
                 &lt;/params>

                 &lt;<a class="silent" href="xml/script.xml">script</a> language   = "…"
                         java_class = "…"
                         com_class  = "…"
                         filename   = "…" >
                     &lt;<a class="silent" href="xml/include.xml">include</a> file="…"/>
                     &lt;![CDATA[
                         <i>programm-code</i>… 
                     ]]&gt;
                 &lt;/script>
               <i>oder</i>
                 &lt;<a class="silent" href="xml/process.xml">process</a> file         = "…"
                          param        = ""
                          log_file     = ""
                          ignore_error = "no" />

                 &lt;<a class="silent" href="xml/run_time.xml">run_time</a> let_run="no">
                     &lt;<a class="silent" href="xml/period.xml">period</a> let_run      = "…"
                             begin        = "00:00"
                             end          = "24:00"
                             single_start = "…"     
                             repeat       = "…"     >
                     &lt;/period>

                     &lt;<a class="silent" href="xml/date.xml">date</a> date="yyyy-mm-dd"/>
                     …

                     &lt;<a class="silent" href="xml/weekdays.xml">weekdays</a>>
                         &lt;<a class="silent" href="xml/day.xml">day</a> day="…">
                             &lt;<a class="silent" href="xml/period.xml">period></a>…&lt;/period>
                             …
                         &lt;/day>
                         …
                     &lt;/weekdays>

                     &lt;<a class="silent" href="xml/monthdays.xml">monthdays</a>>
                         &lt;<a class="silent" href="xml/day.xml">day</a> day="…">
                             &lt;<a class="silent" href="xml/period.xml">period></a>…&lt;/period>
                             …
                         &lt;/day>
                         …
                     &lt;/monthdays>

                     &lt;<a class="silent" href="xml/ultimos.xml">ultimos</a>>
                         &lt;<a class="silent" href="xml/day.xml">day</a> day="…">
                             &lt;<a class="silent" href="xml/period.xml">period></a>…&lt;/period>
                             …
                         &lt;/day>
                         …
                     &lt;/ultimos>

                     &lt;<a class="silent" href="xml/holidays.xml">holidays</a>>
                         &lt;<a class="silent" href="xml/holiday.xml">holiday</a> date="yyyy-mm-dd"/>
                         …
                     &lt;/holidays>
                 &lt;/runtime>
             &lt;/job>
             …
        &lt;/jobs>
    &lt;/config>
&lt;/spooler>
</pre>

</description>
