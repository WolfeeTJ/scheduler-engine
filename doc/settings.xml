<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="scheduler.xslt" type="text/xsl"?>

<!--$Id: settings.xml,v 1.8 2004/08/31 11:19:42 jz Exp $-->

<!-- Einige Einstellungen können an mehreren Stellen vorgenommen werden:
     - Konfigurationsdatei
     - factory.ini
     - Kommandozeile
     - Programm-Schnittstelle

     Diese Einstellungen werden hier beschrieben.
-->

<settings
    base_dir    = "."
    title       = "Einstellungen"
    author      = "$Author: jz $"
    date        = "$Date: 2004/08/31 11:19:42 $"
>

    <setting setting        = "log_dir" 
             type           = "verzeichnis" 
             title          = "Verzeichnis der Protokolle">

        <description>
            <p>
                In dieses Verzeichnis schreibt der Scheduler seine Protokolle.
            </p>
            <p>
                <scheduler_setting name="log_dir" value="*stderr"/> lässt den Scheduler 
                die Protokollausgabe nach stderr (auf den Schirm) schreiben.
            </p>
        </description>
    </setting>


    <setting setting           = "param" 
             api               = "Spooler.param"
             type              = "text" 
             title             = "Zur freien Verwendung">

        <description>
            <p>
                Zur freien Verwendung.
                Der Parameter ist in den Skripten über <code>spooler.param</code> lesbar.
            </p>
        </description>
    </setting>


    <setting setting= "config" 
             type   = "dateiname" 
             title  = "Konfigurationsdatei">

        <description>
            <p>
                Gibt die <a href="konfiguration.xml">Konfigurationsdatei</a> an.
            </p>
        </description>
    </setting>


    <setting setting= "option_id" 
             type   = "scheduler_id"
             title  = "Kennung des Schedulers">

        <description>
            <p>
                Der Scheduler wählt nur die Elemente der XML-Konfiguration aus,
                deren Attribut <code>spooler_id=</code> leer ist oder denselben Wert
                wie in dieser Einstellung enthält.
            </p>
            <p>
                Wenn die Scheduler-Id nicht angegeben ist, beachtet der Scheduler das XML-Attribut <code>spooler_id=</code> nicht
                und wählt alle Elemente der XML-Konfiguration aus.
            </p>
            <p>
                Siehe z.B. <scheduler_element name="config"/>.
            </p>
        </description>
    </setting>
    
    <setting setting= "spooler_id" 
             type   = "scheduler_id">

        <description>
            <p>
                Das Element ist nur wirksam, wenn dieses Attribut leer oder gleich dem
                Parameter <code>-id=</code> vom Scheduler-Start ist,
                oder wenn beim Scheduler-Start die Option <scheduler_option name="id"/> nicht angegeben worden ist.
<!--
                Gibt die Scheduler-Id an.
                Der Scheduler wählt aus der Konfigurationsdatei die Einträge mit dem Attribut 
                <code>spooler_id="</code><i>spooler_id</i><code>"</code> oder 
                <code>spooler_id=""</code>
                aus.
-->                
            </p>
        </description>
    </setting>
    

    <setting setting= "log_level" 
             type   = "log_level"
             title  = "Protokollausgaben beschränken">
        <description>
            <p>
                Legt fest, ab welcher Stufe der Scheduler Protokollzeilen ausgibt.
                Jede Protokollzeile ist auf einer der folgenden Stufen:
                <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug1</code> bis <code>debug9</code> 
                (<code>debug1</code> ist dasselbe wie <code>debug</code>).
            </p>
        </description>
    </setting>


    <setting setting   = "include_path" 
             type      = "verzeichnis"
             title     = "Für &lt;include&gt;"
             subst_env = "yes">
        <description>
            <p>
                Verzeichnis der Dateien, die mit <scheduler_element name="include"/> eingezogen werden.
            </p>
        </description>
    </setting>

    
    <setting setting = "html_dir" 
             type    = "verzeichnis"
             title   = "Verzeichnis der HTML-Dateien">
        <description>
            <p>
                In diesem Verzeichnis stehen die HTML-Dateien für den HTTP-Server im Scheduler.
            </p>
            <p>
                Wenn die Angabe fehlt, nimmt der Scheduler das Verzeichnis <code>html</code> im Verzeichnis der Konfigurationsdatei.
            </p>
        </description>
    </setting>


    <setting setting = "db_tasks_table" 
             type    = "name"
             initial = "SCHEDULER_TASKS"
             title   = "Name der Datenbanktabelle für die Tasks">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "db_history_table" 
             type    = "name"
             initial = "SCHEDULER_HISTORY"
             title   = "Name der Datenbanktabelle für die Historie">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "db_order_history_table" 
             type    = "name"
             initial = "SCHEDULER_ORDER_HISTORY"
             title   = "Name der Datenbanktabelle für die Auftragshistorie">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "db_orders_table" 
             type    = "name"
             initial = "SCHEDULER_ORDERS"
             title   = "Name der Datenbanktabelle für die Aufträge">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "db_variables_table" 
             type    = "name"
             initial = "SCHEDULER_VARIABLES"
             title   = "Name der Datenbanktabelle für die Variablen">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "history_columns" 
             type    = "name, name, ..."
             title   = "Zusätzliche Spalten in der Historie">
        <description>
            <p>
                Eine Task kann mit der Methode Task.set_history_field() die hier angegebenen Felder der Datenbanktabelle für die Task-Historie setzen.
            </p>
        </description>
    </setting>

    <setting setting = "history" 
             type    = "yes|no"
             initial = "yes"
             title   = "Historie schreiben?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "history_file" 
             type    = "dateiname"
             title   = "Dateiname der Historie (für datenbanklosen Betrieb)">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting= "history_on_process" 
             type   = "yes|no|zahl"
             initial = "0"
             title  = "Nach spooler_process() Historiensatz schreiben?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "history_archive" 
             type    = "yes|no|gzip"
             initial = "no"
             title   = "Historiendateien archivieren?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "history_with_log" 
             type    = "yes|no|gzip"
             initial = "no"
             title   = "Protokoll in die Historie schreiben?">
        <description>
            <p>
            </p>
        </description>
    </setting>

    <setting setting = "order_history" 
             type    = "yes_no"
             initial = "yes"
             title   = "Aufträge in die Historie schreiben?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "order_history_with_log" 
             type    = "yes|no|gzip"
             initial = "no"
             title   = "Auftragsprotokolle in die Historie schreiben?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "db" 
             type    = "hostware_filename"
             title   = "Hostware-Dateiname der Datenbank">
        <description>
            <p>
Hostware-Dateiname der Datenbank für die Historienführung.
Ohne Eintrag werden Dateien im .csv-Format erzeugt, siehe <scheduler_ini_entry file="factory.ini" section="spooler" entry="history_file"/>.
            </p>
            <p>
Unter Windows kann auch ein einfacher Dateiname angegebenen werden, der auf <code>.mdb</code> endet (z.B. <code>scheduler.mdb</code>).
Der Scheduler verwendet dann eine Access-Datenbank dieses Namens, 
die im Protokollverzeichnis (s. Option <scheduler_option name="log-dir"/>) liegt.
Der Scheduler richtet die Datei ein, wenn sie fehlt.
            </p>
            <p>
Der Scheduler richtet die Tabellen selbständig ein.            
            </p>
        </description>
        
        <example>
<pre>
;db = jdbc -wait=30 -class=com.microsoft.jdbc.sqlserver.SQLServerDriver jdbc:microsoft:sqlserver://localhost:1433;selectMethod=Cursor;databaseName=factory -user=factory -password=factory
;db = odbc -wait=30 -db=factory_sql -user=factory -password=factory
 
db  = jdbc -wait=15 -class=com.mysql.jdbc.Driver jdbc:mysql://localhost/factory:3307?user=factory&amp;password=factory
;db = odbc -wait=30 -db=factory_mysql -user=factory -password=factory
 
;db = jdbc -wait=30 -class=oracle.jdbc.driver.OracleDriver jdbc:oracle:thin:@apnb:1521:test -user=factory -password=factory
;db = odbc -wait=30 -db=factory_oracle -user=factory -password=factory

;db = scheduler.mdb 
</pre>        
 
        </example>
    </setting>


    <setting setting = "need_db" 
             type    = "yes|no|strict"
             initial = "no"
             title   = "Ist die Datenbank notwendig?">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "max_db_errors" 
             type    = "zahl"
             initial = "5"
             title   = "Anzahl Datenbank-Fehler, bevor Scheduler aufgibt">
        <description>
            <p>
            </p>
        </description>
    </setting>

    <setting setting = "mail_on_error" 
             type    = "yes|no"
             initial = "no"
             title   = "Mit Fehler beendete Task verschickt eMail">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "mail_on_process" 
             type    = "yes|no|zahl"
             initial = "no"
             title   = "Task mit spooler_process() verschickt eMail">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "mail_on_success" 
             type    = "yes|no"
             initial = "no"
             title   = "Erfolgreich gelaufende Task verschickt eMail">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "mail_queue_dir" 
             type    = "verzeichnis"
             title   = "Verzeichnis der zeitweilig nicht versendbaren eMails">
        <description>
            <p>
                eMails, die der Scheduler nicht verschicken kann (weil z.B. der SMTP-Server nicht läuft),
                werden hier abgelegt.
            </p>
            <p>
                Um diese eMails später zu verschicken, muss ein Job geschrieben werden, der die 
                Methode spooler_log.mail().dequeue() aufruft.
            </p>
        </description>
    </setting>


    <setting setting   = "java_class_path" 
             type      = "dateinamen"
             prepend   = "yes"
             subst_env = "yes"
             title     = "Java-Classpath">
        <description>
            <p>
                Wenn Jobs in Java implementiert sind, kann hier der <code>CLASS_PATH</code> eingestellt werden.
                Das ist eine Liste von Verzeichnissen, in Windows durch Semikolons (;), in Unix 
                durch Doppelpunkte getrennt.
            </p>
        </description>
    </setting>


    <setting setting   = "java_options" 
             type      = "text"
             prepend   = "yes"
             subst_env = "yes"
             title     = "Java-Optionen">
        <description>
            <p>
                Die Optionen werden der Java Virtual Machine übergeben.
            </p>
        </description>
    </setting>


    <setting setting = "javac" 
             type    = "dateiname"
             initial = "javac"
             title   = "Dateiname des Java-Compilers">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "log_mail_subject" 
             type    = "text"
             title   = "Betreff der eMails">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "log_mail_from" 
             type    = "email_address"
             title   = "Absender der eMails">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "log_mail_to" 
             type    = "email_address"
             title   = "To-Empfänger der eMails">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "log_mail_cc" 
             type    = "email_address"
             title   = "Cc-Empfänger der eMails">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "log_mail_bcc" 
             type    = "email_address"
             title   = "Bcc-Empfänger der eMails">
        <description>
            <p>
            </p>
        </description>
    </setting>


    <setting setting = "smtp" 
             type    = "host_address"
             title   = "Hostname oder IP-Nummer des SMTP-Servers für eMail">
        <description>
            <p>
            </p>
        </description>
    </setting>

<!--
    <setting setting = "run_time_begin" 
             type    = "hh:mm[:ss]"
             initial = "00:00">
        <description>
            <p>
                Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                generiert der Scheduler eine Periode mit dieser Einstellung, 
                anderfalls ist es die Voreinstellung für die Kind-Elemente.
            </p>
        </description>
    </setting>


    <setting setting = "run_time_end" 
             type    = "hh:mm[:ss]"
             initial = "24:00"
             title   = "">
        <description>
            <p>
                Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                generiert der Scheduler eine Periode mit dieser Einstellung, 
                anderfalls ist es die Voreinstellung für die Kind-Elemente.
            </p>
        </description>
    </setting>


    <setting setting = "run_time_single_start" 
             type    = "hh:mm[:ss]"
             initial = ""
             title   = "">
        <description>
            <p>
                Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                generiert der Scheduler eine Periode mit dieser Einstellung.
            </p>
        </description>
    </setting>


    <setting setting = "run_time_let_run" 
             type    = "yes_no"
             initial = ""
             title   = "">
        <description>
            <p>
                Voreinstellung für <scheduler_element name="period"/>.
            </p>
        </description>
    </setting>
-->

    <description>
        <p>
            Hier sind Einstellungen aufgeführt, die an mehreren Stellen vorgenommen werden können.
        </p>
    </description>
    
</settings>
