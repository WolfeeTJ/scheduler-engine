<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="scheduler.xslt" type="text/xsl"?>

<!--$Id: protokolle.xml,v 1.5 2004/09/11 09:28:26 jz Exp $-->

<description 
    title    = "Protokolle" 
    base_dir = ""
    author   = "$Author: jz $"
    date     = "$Date: 2004/09/11 09:28:26 $"
>

<scheduler_keyword keyword="Protokoll"/>

<p>
    Ins mit der Option <scheduler_option name="log-dir"/> eingestellten Verzeichnis schreibt der Scheduler seine Protokolle.
</p>

<scheduler_keyword keyword="Hauptprotokoll" type="definition"/>
<h3>Hauptprotokoll</h3>
<p>
    Das Hauptprotokoll fast alle Protokolle zusammen.
    Der Dateiname wird aus Scheduler-Id, Datum und Uhrzeit gebildet, z.B. 
    <code>scheduler-2004-08-24-104111.log</code>.
</p>
    
<h3>Jobprotokolle</h3>
<p>
    Für jeden Job erstellt der Scheduler ein Jobprotokoll
    mit den Starts der Tasks und eingetroffenen Aufträgen.
    Beispiel: <code>job.mein_job.log</code>
</p>

<h3>Taskprotokolle</h3>
<p>
    Für jeden Task erstellt der Scheduler ein Taskprotokoll. 
    Der Dateiname wird aus dem Jobnamen und, wenn mehrere Tasks zugelassen sind, der Task-Id gebildet, 
    z.B.: <code>task.mein_job.log</code> und <code>task.ein_job.1234.log</code>.
    Taskprotokolle mit Task-Id werden nach Ende der Task gelöscht.
</p>
    
<h3>Auftragsprotokolle</h3>
<p>
    Für jeden Auftrag erstellt der Scheduler ein Auftragsprotokoll
    mit den Ausgaben aller Tasks, die der Auftrag durchläuft.
    Der Dateiname wird aus der Jobkette und der Auftrags-Id gebildet,
    z.B.: <code>order.meine_jobkette.9876.log</code>.
    Das Auftragsprotokoll wird nach Ende des Auftrags gelöscht.
</p>



<h2>Ablage in den Datenbank</h2>

<p>
    Der Scheduler kann die Task- und Auftragsprotokolle mit in die Historie schreiben.
    Voraussetzung sind
</p>
    
<ul>
    <li>
        Betrieb mit einer <a href="datenbank.xml">Datenbank</a>, 
    </li>
    <li>
        die Einstellung <scheduler_ini_entry file="factory.ini" section="spooler" entry="history"/>), um die Historie einzuschalten,
    </li>
    <li>
        die Einstellung <scheduler_ini_entry file="factory.ini" section="spooler" entry="history_with_log"/> fürs Task-Protokoll,
    </li>
    <li>
        die Einstellung <scheduler_ini_entry file="factory.ini" section="job" entry="history_with_log"/> für bestimmte Jobs,
    </li>
    <li>
        die Einstellung <scheduler_ini_entry file="factory.ini" section="spooler" entry="order_history_with_log"/> fürs Auftragsprotokoll.
    </li>
</ul>


<h2>eMail-Versand</h2>    

<p>
    Der Scheduler kann das Task-Protokoll per eMail verschicken. Lesen Sie weiter im Kapitel <a href="email.xml">eMail</a>.
</p>



<h2>Anzeigen der Protokolle</h2>

<p>
    Siehe Kommandos <scheduler_element name="show_state"/>, <scheduler_element name="show_task"/> und <scheduler_element name="show_history"/>.
</p>



<scheduler_comment>http:show_log </scheduler_comment>

</description>
