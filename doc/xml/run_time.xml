<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="../scheduler.xsl" type="text/xsl"?>

<!--$Id$-->

<xml_element name     = "run_time" 
             title    = "Laufzeiten"
             category = "Konfiguration"
             base_dir = "../"
             parent_page = "../konfiguration.xml"
             author   = "$Author$"
             date     = "$Date$">

    <xml_parent_elements>
        <xml_parent_element name="job">
        </xml_parent_element>        
    </xml_parent_elements>
    

    <xml_attributes>
        <xml_attribute name="once" type="yes_no" initial="no">
            <description>
                <p>
                    Bei <code>once="yes"</code> startet der <span class="sos_name">Scheduler</span>
                    den Job einmal nach Start des <span class="sos_name">Schedulers</span>,
                    sobald die <code>&lt;run_time</code> dies zulässt.
                </p>
            </description>
        </xml_attribute>

        <!-- Die Beschreibungen für let_run, single_start, begin und end werden auch für andere Elemente (date, weekday etc.) verwendet.
             Also den Text neutral halten! -->
        
        <xml_attribute name="begin" type="hh:mm[:ss]" initial="00:00">
            <description>
                <p>
                    Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                    generiert der Scheduler eine Periode mit dieser Einstellung, 
                    anderfalls ist es die Voreinstellung für die Kind-Elemente.
                </p>
            </description>
        </xml_attribute>

        <xml_attribute name="end" type="hh:mm[:ss]" initial="24:00">
            <description>
                <p>
                    Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                    generiert der Scheduler eine Periode mit dieser Einstellung, 
                    anderfalls ist es die Voreinstellung für die Kind-Elemente.
                </p>
            </description>
        </xml_attribute>

        <xml_attribute name="single_start" type="hh:mm[:ss]">
            <description>
                <p>
                    Wenn das Element leer ist (also kein <code>&lt;period></code> enthält),
                    generiert der Scheduler eine Periode mit dieser Einstellung.
                </p>
            </description>
        </xml_attribute>
        
        <xml_attribute name="let_run" type="yes_no">
            <description>
                <p>
                    Voreinstellung für <scheduler_element name="period"/>
                </p>
            </description>
        </xml_attribute>

    </xml_attributes>


    <xml_child_elements>
        <xml_child_element name="period" multiple="yes">
            <description>
                <p>
                    Voreinstellung der Perioden für die Elemente
                    <code>&lt;date></code>,
                    <code>&lt;weekdays></code>,
                    <code>&lt;monthdays></code> und
                    <code>&lt;ultimos></code>.
                    Diese Elemente können weitere Perioden hinzufügen.
                    Wenn keines dieser Elemente angegeben ist, gelten die Perioden für jeden Tag.
                </p>
            </description>
        </xml_child_element>        

        <xml_child_element name="date" multiple="yes">
            <description>
                <p>
                </p>
            </description>
        </xml_child_element>        

        <xml_child_element name="weekdays" multiple="yes">
            <description>
                <p>
                </p>
            </description>
        </xml_child_element>        

        <xml_child_element name="monthdays" multiple="yes">
            <description>
                <p>
                </p>
            </description>
        </xml_child_element>        

        <xml_child_element name="ultimos" multiple="yes">
            <description>
                <p>
                </p>
            </description>
        </xml_child_element>        

        <xml_child_element name="holidays">
            <description>
                <p>
                </p>
            </description>
        </xml_child_element>        
    </xml_child_elements>
    
    
    <description>
        <p>
            <code>&lt;run_time></code> gibt an, zu welchen Zeiten der Scheduler Tasks dieses Jobs laufen lässt.
            Das wird realisiert durch Perioden (s. <scheduler_element name="period"/>).
            Der Scheduler wählt die erste Periode aus, die zu einer Zeit gilt (deren Ende noch nicht abgelaufen ist).
            Diese Periode gilt bis zu ihrem Ende. Dann wählt der Scheduler erneut eine Periode aus.
        </p>
        <p>
            Eine Periode mit <code>single_start</code> gilt nur für einen Zeitpunkt.
        </p>
        
        
        <h3>Sommer- und Winterzeit</h3>
        <p>
            Der Scheduler berücksichtigt die Zeitumstellung zu Beginn und Ende der Sommerzeit. 
            Es gilt stets die lokale Zeit.
        </p>
        <p>
            Ein Job, der eine Startzeit zwischen 2 und 3 Uhr hat, kann zum Ende 
            der Sommerzeit zweimal gestartet werden.
        </p>
    </description>
    
    <example>
        <pre>&lt;run_time/></pre>
        
            ist, wegen der Voreinstellungen für <code>begin=</code> und <code>end=</code>, dasselbe wie        
            
        <pre>&lt;run_time begin="00:00" end="24:00"/></pre>
        
            ist, weil <code>&lt;run_time></code> leer ist, dasselbe wie        
            
        <pre>&lt;run_time>
    &lt;period begin="00:00" end="24:00"/>
&lt;/run_time></pre>

            also eine Periode für jeden Tag rund um die Uhr.
            Der Job kann immer laufen.
    </example>
    
</xml_element>
