<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="../scheduler.xsl" type="text/xsl"?>

<!--$Id$-->

<xml_element name          = "commands"
             title         = "XML-Kommandos"
             base_dir      = "../"
             parent_page   = "../xml_commands.xml"
             author        = "$Author$"
             date          = "$Date$">

    <xml_parent_elements>
        <xml_parent_element directory="xml/" name="config">
            <description>
                <p>
                    Der Scheduler führt die Kommandos nach dem Laden der Konfiguration
                    und vor dem Scheduler-Skript aus.
                </p>
                <p>
                    Ein Fehler beendet den Scheduler.
                </p>
            </description>
        </xml_parent_element>

        <xml_parent_element directory="xml/" name="job">
            <description>
                <p>
                    Der Scheduler führt die Kommandos aus, wenn eine Task sich beendet.
                    Für manche Kommandos lassen sich die Parameter der beendeten Task 
                    oder (unter bestimmten Bedingungen) des zuletzt ausgeführten Auftrags
                    mit <scheduler_element name="copy_params"/> übernehmen.
                </p>
                <p>
                    Ein Fehler stoppt den Job (siehe aber <scheduler_element name="delay_after_error"/>).
                </p>
            </description>
        </xml_parent_element>
    </xml_parent_elements>

    <xml_attributes>
        <xml_attribute name="on_exit_code" type="exitcodes">
            <description>
                <p>
                    Innerhalb von <scheduler_element name="job"/> ist dieses Attribut Pflicht,
                    woanders kann es nicht verwendet werden.
                </p>
                <p>
                    Gibt die Exit-Codes an, die zur Ausführung der hier aufgeführten Kommandos führen sollen.
                    Als Wert kann angegeben werden:
                </p>
                <ul>
                    <li>
                        Eine Liste von Exit-Codes, die einzelnen Zahlen durch Blanks getrennt.
                    </li>
                    <li>
                        <code>on_exit_code="success"</code> ist dasselbe wie <code>on_exit_code="0"</code>.
                    </li>
                    <li>
                        <code>on_exit_code="error"</code> gilt für alle Exit-Codes außer 0 und außer der bereits in 
                        anderen <scheduler_element name="commands" attribute="exit_code"/> angegeben Exit-Codes.
                    </li>
                </ul>
            </description>
            
            <example>
                <pre>on_exit_code="0"
on_exit_code="1 2 3 99"
on_exit_code="error"</pre>
            </example>
            
            <messages>
                <!-- Beim Scheduler-Start: -->
                <message code="SCHEDULER-324" level="error"/>
                <message code="SCHEDULER-325" level="error"/>
                <message code="SCHEDULER-326" level="error"/>
                <!-- Während der Ausführung: -->
                <message code="SCHEDULER-328" level="info"/>
                <message code="SCHEDULER-327" level="error"/>
            </messages>
        </xml_attribute>
    </xml_attributes>
    
    <xml_child_elements>
        <xml_child_element directory="xml/" name="add_jobs" multiple="yes"/>
        <xml_child_element directory="xml/" name="add_order" multiple="yes"/>
        <xml_child_element directory="xml/" name="modify_job" multiple="yes"/>
        <xml_child_element directory="xml/" name="modify_order" multiple="yes"/>
        <xml_child_element directory="xml/" name="modify_spooler" multiple="yes"/>
        <xml_child_element directory="xml/" name="show_history" multiple="yes"/>
        <xml_child_element directory="xml/" name="show_job" multiple="yes"/>
        <xml_child_element directory="xml/" name="show_jobs" multiple="yes"/>
        <xml_child_element directory="xml/" name="show_job_chains" multiple="yes"/>
        <xml_child_element directory="xml/" name="show_state" multiple="yes"/>
        <xml_child_element directory="xml/" name="start_job" multiple="yes"/>
        <xml_child_element directory="xml/" name="terminate" multiple="yes"/>
    </xml_child_elements>


    <description>
        <p>
            Das Element fasst eine Folge von Kommandos zusammen.
            Wann die Kommandos ausgeführt werden, 
            hängt vom Eltern-Element ab.
        </p>
    </description>

    <messages>
        <message code="SCHEDULER-965" level="info">
            <description>
                Jedes auszuführende Kommando wird protokolliert.
            </description>
        </message>
        
        <message code="SCHEDULER-966" level="info">
            <description>
                Die Antwort des Kommandos, wenn vorhanden
            </description>
        </message>
    </messages>

</xml_element>
