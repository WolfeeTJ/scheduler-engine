<html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="ProgId" content="FrontPage.Editor.Document">
<style type="text/css">
h1           { font-size: 24pt; font-weight: bold; margin-bottom: 4ex;  }
h2           { font-size: 12pt; font-weight: bold; margin-top: 10ex; }
h3           { font-size: 10pt; font-weight: bold; margin-top: 6ex }
.zwischentitel { font-weight: bold; margin-top: 6ex }
td           { font-size: 10pt; margin-top: 2ex; margin-bottom: 0  }
p            { font-size: 10pt; margin-top: 2ex; margin-bottom: 0  }
li           { font-size: 10pt }
pre          { font-family: Lucida Console, monospace; font-size: 9pt; margin-left: 5mm; line-height: 1.2em; }
.indent      { margin-left: 5mm; }
.mono        { font-family: Lucida Console, monospace; font-size: 9pt }
</style>

<title>Aufträge im Spooler - Klasse Job_chain</title>
</head>
<body>



<h1>Aufträge im Spooler - Klasse Job_chain</h1>

<p align="right">14. Oktober 2002
</p>

<h2>Eigenschaften und Methoden
</h2>

<p><font class="mono"><a href="#name">name</a></font>
</p>

<p><font class="mono"><a href="#node">node</a></font>
</p>

<p><font class="mono"><a href="#order_queue">order_queue</a></font>
</p>

<p><font class="mono"><a href="#order_count">order_count</a></font>
</p>

<p><font class="mono"><a href="#add_job">
add_job()</a></font>
</p>

<p><font class="mono"><a href="#add_end_state">
add_end_state()</a></font>
</p>

<p><font class="mono"><a href="#add_order">
add_order()</a></font>
</p>

<h2><a name="name"></a>name
</h2>
<p>Name der Jobkette.
</p>
<p>Jede Jobkette im Spooler muss einen eigenen Namen haben.
</p>
<p>Ist nach dem Eintrag der Jobkette im Spooler mit <font class="mono"><a href="spooler.html#add_job_chain">spooler.add_job_chain()</a></font>
nicht mehr änderbar.
</p>
<h2><a name="node"></a>node
</h2>
<p>Liefert den <a href="job_chain_node.html">Jobkettenknoten</a>, der dem
Zustand zugeordnet ist.
</p>
<p><i>job_chain</i><font class="mono">.</font><font class="mono">node( </font><i>state</i>
<font class="mono">)</font>
</p>
<p>(Delphi verlangt vielleicht statt der runden Klammen eckige, denn es ist eine
Eigenschaft.)
</p>
<p><font class="mono"><i><br>
state</i></font>
</p>
<p class="indent">Bezeichnung des Zustands.&nbsp;
</p>
<h2><a name="order_queue"></a>order_queue
</h2>
<p>Liefert die Auftragsliste zu einem Zustand der Jobkette.
</p>
<p><i>job_chain</i><font class="mono">.order_queue( <i>state </i>)</font>
</p>
<p>(Delphi verlangt statt der runden Klammen eckige, denn es ist eine
Eigenschaft.)
</p>
<p>Ist gleichbedeutend mit <i>job_chain</i><font class="mono">.</font><font class="mono">node(
</font><i>state</i> <font class="mono">).job.order_queue</font>
</p>
<p><i><br>
</i><font class="mono"><i>state</i></font>
</p>
<p class="indent">Bezeichnung des Zustands.
</p>
<h2><a name="order_count"></a>order_count
</h2>
<p>Liefert die Zahl der Aufträge, die gerade in der Jobkette sind.
</p>
<p><i>job_chain</i><font class="mono">.order_count</font>
</p>
<p>Die Zahl kann geringfügig vom tatsächlichen Wert abweichen, wenn während
des Addierens der Längen der Auftragslisten Aufträge ihre Stelle in der
Jobkette ändern (die werden vielleicht doppelt oder nicht gezählt).&nbsp;
</p>
<h2><a name="add_job"></a>add_job()
</h2>
<p>Fügt der Jobkette einen Job hinzu.
</p>
<p>&nbsp;
</p>
<p><i>job_chain</i><font class="mono">.add_job( </font><i>jobname</i><font class="mono">,
</font>[<i>state</i>]<font class="mono">, </font>[<i>next_state</i>]<font class="mono">,
</font>[<i>error_state</i>]<i> </i><font class="mono">)</font>
</p>
<p><i><br>
jobname</i>
</p>
<p class="indent">Name des Jobs
</p>
<p><i><br>
state</i>
</p>
<p class="indent">Eindeutige Bezeichnung des Zustands.&nbsp;
</p>
<p class="indent">Typ kann numerisch oder Text oder irgendein Variant sein, der
sich als Text darstellen lässt. Großschreibung ist relevant.&nbsp;
</p>
<p class="indent">Wenn der Parameter fehlt, wird als Zustandsbezeichnung der
Jobname verwendet.
</p>
<p><i><br>
next_state</i>
</p>
<p class="indent">Bezeichnung des Folgezustands.
</p>
<p class="indent">Der Folgezustand muss mit <font class="mono">add_job()</font>
oder mit <font class="mono"><a href="#add_end_state">add_end_state()</a></font> definiert sein (spätestens
beim Aufruf von <font class="mono"><a href="spooler.html#add_job_chain">spooler.add_job_chain()</a></font>).
</p>
<p class="indent">Wenn der Parameter fehlt (<font class="mono">=VT_ERROR</font>),
wird der Zustand des folgenden Aufrufs <font class="mono">add_job()</font>
verwendet.
</p>
<p><i><br>
error_state&nbsp;</i>
</p>
<p class="indent">Bezeichnung des Fehlerzustands, das ist der Zustand, den der
Auftrag erreicht, nachdem <font class="mono">spooler_process()</font> false
liefert.
</p>
<p class="indent">Der Fehlerzustand ist ein normaler Zustand (wie <i>state</i>).
</p>
<p class="indent">Der Fehlerzustand muss mit <font class="mono">add_job()</font>
oder mit <font class="mono"><a href="#add_end_state">add_end_state()</a></font> 
definiert sein (spätestens
beim Aufruf von <font class="mono"><a href="spooler.html#add_job_chain">spooler.add_job_chain()</a></font>).
</p>
<p class="indent">Wenn der Parameter fehlt, wird <font class="mono"> Empty</font> angenommen, und das ist
der vordefinierte Endzustand.
</p>
<h2><a name="add_end_state"></a>add_end_state()
</h2>
<p>Fügt der Jobkette einen Endzustand hinzu.
</p>
<p><i><br>
job_chain</i><font class="mono">.add_end_state( </font><i>state</i><font class="mono">
</font><font class="mono">)</font>
</p>
<p><i><br>
<br>
state</i>
</p>
<p class="indent">Eindeutige Bezeichnung eines Endzustands. Beliebig viele
Endzustände können hinzugefügt werden.&nbsp;
</p>
<p class="indent">Ein Auftrag, der einen Endzustand erreicht, ist abgeschlossen
und wird aus dem Spooler entfernt.
</p>
<p><br>
Wenn der letzte Aufruf beim Aufbau der Jobkette <font class="mono"><a href="#add_job">add_job()</a></font>
war und kein Folgezustand angegeben ist, ruft der Spooler selbst <font class="mono">add_end_state(&quot;&lt;END_STATE&gt;&quot;)</font>
auf, um einen Endezustand zu definieren.
</p>
<p>Mehrfache Aufrufe von <font class="mono">add_end_state()</font> mit demselben
<i>state</i> ignoriert der Spooler.
</p>
<h2><a name="add_order"></a>add_order()
</h2>
<p>Platziert einen Auftrag in eine Jobkette.
</p>
<p>&nbsp;
</p>
<p><i>job_chain</i><font class="mono">.add_order( <i>order_or_payload</i></font><i>
</i><font class="mono">)</font>
</p>
<p><font class="mono"><i><br>
order_or_payload</i></font>
</p>
<p class="indent">Wenn der Parameter kein Auftrag ist, erzeugt der Aufruf einen
und setzt dessen Eigenschaft <font class="mono">payload</font> auf diesen
Parameter.&nbsp;
</p>
<p class="indent">Wenn die Eigenschaft <font class="mono">state</font> des
Auftrags gesetzt (also nicht <font class="mono">Empty</font>) ist , wird der
Auftrag an die passende Stelle in der Jobkette gesetzt. Die Jobkette muss den
Zustand definiert haben (mit <font class="mono"><a href="#add_job">add_job()</a></font>).
</p>
<p class="indent">Wenn der Auftrag bereits in einer Jobkette oder Auftragsliste
ist, wird er zuvor daraus entfernt.
</p>
<p class="indent">Wenn die <font class="mono">id</font> des Auftrags nicht
gesetzt (also <font class="mono">Empty</font>) ist, erzeugt der Spooler eine
(nämlich eine fortlaufende Nummer).&nbsp;
</p>
<p><br>
Rückgabe
</p>
<p class="indent">Der Aufruf liefert als Rückgabe den Auftrag.
</p>
<p><br>
Siehe <a href="order_queue.html#hinweis">Hinweis zur Geschwindigkeit</a> bei
Order_queue.
</p>

<p class="indent">&nbsp;</p>

<p class="indent">&nbsp;</p>

<HR SIZE=1>
<FONT face="Arial" size="2">Dipl.-Inform. Joacim Zschimmer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
<A href="mailto:j@zsch.de">j@zsch.de</A>
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;(030) 3470 2520&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Zschimmer GmbH</FONT>

</body>

</html>
