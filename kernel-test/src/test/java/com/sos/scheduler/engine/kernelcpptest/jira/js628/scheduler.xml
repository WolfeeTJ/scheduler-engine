<?xml version="1.0" encoding="utf-8"?>
<spooler xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="c:/sos/scheduler/engine/kernel-cpp/prod/scheduler/scheduler.xsd">
	<config>
		<!-- irgendwas.plugin.xml -->
		<!-- com.sos.scheduler.engine.playground.mq.JMSPlugIn.plugin.xml -->
		<plugins>
            <plugin java_class="com.sos.scheduler.engine.plugins.event.JMSEventPlugIn">
				<plugin.config>
					<jms>
						<connection providerUrl="vm:localhost"
							persistenceDirectory="c:/temp/amq" />
						<!-- connection providerUrl="tcp://localhost:61616"/ -->
						<!--connection providerUrl="vm:com.sos.scheduler"/ -->
						<!--brokerService name="com.sos.scheduler"> <connector url="tcp://localhost:63102"/> 
							</brokerService -->
					</jms>
				</plugin.config>
			</plugin>
		</plugins>

		<jobs>
			<job order="yes" title="succeeded for JS628 (process=true, process_before=true)" stop_on_error="no" name="js628-1-success">
				<script language="javascript">
                <![CDATA[
function spooler_process(){
   return true;
}
                ]]>
				</script>
				<monitor name="process0" ordering="0">
					<script language="javascript">
                    <![CDATA[
<!-- if spooler_process_before results true, the jobchin should be ended normally -->                    
function spooler_process_before(){
   return true;
}
                    ]]>
					</script>
				</monitor>
				<run_time />
			</job>

			<job order="yes" title="failed for JS628 (process=true, process_before=false)" stop_on_error="no" name="js628-1-fail-1">
				<script language="javascript">
                <![CDATA[
function spooler_process(){
   return true;
}
                ]]>
				</script>
				<monitor name="process0" ordering="0">
					<script language="javascript">
                    <![CDATA[
<!-- if spooler_process_before results false, the jobchin should be failed anyway -->                    
function spooler_process_before(){
   return false;
}
                    ]]>
					</script>
				</monitor>
				<run_time />
			</job>

			<job order="yes" title="failed for JS628 (process=false, process_before=false)" stop_on_error="no" name="js628-1-fail-2">
				<script language="javascript">
                <![CDATA[
function spooler_process(){
   return false;
}
                ]]>
				</script>
				<monitor name="process0" ordering="0">
					<script language="javascript">
                    <![CDATA[
<!-- if spooler_process_before results false, the jobchin should be failed anyway -->                    
function spooler_process_before(){
   return false;
}
                    ]]>
					</script>
				</monitor>
				<run_time />
			</job>

			<job order="yes" title="failed for JS628 (process=false, process_before=true)" stop_on_error="no" name="js628-1-fail-3">
				<script language="javascript">
                <![CDATA[
function spooler_process(){
   return false;
}
                ]]>
				</script>
				<monitor name="process0" ordering="0">
					<script language="javascript">
                    <![CDATA[
<!-- if spooler_process_before results false, the jobchin should be failed anyway -->                    
function spooler_process_before(){
   return true;
}
                    ]]>
					</script>
				</monitor>
				<run_time />
			</job>

			<job title="job2 for JS628" order="yes" stop_on_error="no" name="js628-2">
				<params />
				<script language="shell">
                <![CDATA[
echo js628-2
                ]]>
				</script>
				<run_time />
			</job>
		</jobs>

		<job_chains>
			<job_chain orders_recoverable="yes" visible="yes" name="js628_chain_success">
				<job_chain_node state="1" job="js628-1-success" next_state="2" error_state="error" />
				<job_chain_node state="2" job="js628-2" next_state="success" error_state="error" />
				<job_chain_node state="success" />
				<job_chain_node state="error" />
			</job_chain>
			<job_chain orders_recoverable="yes" visible="yes" name="js628_chain_fail_1">
				<job_chain_node state="1" job="js628-1-fail-1" next_state="2" error_state="error" />
				<job_chain_node state="2" job="js628-2" next_state="success" error_state="error" />
				<job_chain_node state="success" />
				<job_chain_node state="error" />
			</job_chain>
			<job_chain orders_recoverable="yes" visible="yes" name="js628_chain_fail_2">
				<job_chain_node state="1" job="js628-1-fail-2" next_state="2" error_state="error" />
				<job_chain_node state="2" job="js628-2" next_state="success" error_state="error" />
				<job_chain_node state="success" />
				<job_chain_node state="error" />
			</job_chain>
			<job_chain orders_recoverable="yes" visible="yes" name="js628_chain_fail_3">
				<job_chain_node state="1" job="js628-1-fail-3" next_state="2" error_state="error" />
				<job_chain_node state="2" job="js628-2" next_state="success" error_state="error" />
				<job_chain_node state="success" />
				<job_chain_node state="error" />
			</job_chain>
		</job_chains>

		<commands>
			<add_order job_chain="js628_chain_success" id="js628_chain_success" />
			<add_order job_chain="js628_chain_fail_1" id="js628_chain_fail-1" />
			<add_order job_chain="js628_chain_fail_2" id="js628_chain_fail-2" />
			<add_order job_chain="js628_chain_fail_3" id="js628_chain_fail-3" />
		</commands>
		
	</config>
</spooler>
