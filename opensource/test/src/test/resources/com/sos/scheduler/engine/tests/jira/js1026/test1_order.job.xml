<?xml version="1.0" encoding="ISO-8859-1"?>

<job order="yes">

    <script  language="shell">
        <![CDATA[
            @echo off
            echo ------ Shellscript 1 -------------------------------------
            echo Hallo von %SCHEDULER_JOB_NAME%

            echo SCHEDULER_RETURN_VALUES=%SCHEDULER_RETURN_VALUES%
            echo testvar1=value1 >> %SCHEDULER_RETURN_VALUES%
            echo testvar2=value2 >> %SCHEDULER_RETURN_VALUES%
            echo ----------------------------------------------------------
        ]]>
    </script>

    <monitor ordering="0" name="read-testvars1">
        <script language="javax.script:rhino">
            <![CDATA[
                function spooler_process_after(spooler_process_result)
                {
                    spooler_log.info( "==========================================================" );
                    spooler_log.info( "SPOOLER_PROCESS_AFTER()" );
                    spooler_log.info("Hallo von Monitor " + spooler_job.name() );

                    var params = spooler_task.order().params();
                    spooler_log.info( "testvar1=" + params.value("testvar1") );
                    spooler_log.info( "testvar2=" + params.value("testvar2") );
                    spooler_log.info( "==========================================================" );

                    return spooler_process_result;
                }
            ]]>
        </script>
    </monitor>

    <run_time />
</job>