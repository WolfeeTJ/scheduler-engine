
BEGIN {
    print "# Dieses Makefile ist mit b2gmake aus einem Borland-Makefile generiert worden."
    print "# DO NOT EDIT THIS FILE!"
    print " "
    print "GNUMAKE=1"
    print " "
}

{
    if( $0 ~ /^!/ )                                 # !direktive --> direktive
    {
         print substr( $0, 2 ); 
    }
    else
    if( $0 ~ /^[a-zA-Z_]* *=/ )                     # name = value  -->  name := value
    {
        x = $0; 
        sub( "=", ":=", x ); 
        print x;  
    } 
    else
    if( $0 ~ /^\.PATH./ )                           # .PATH.ext = path  --> vpath %.ext path
    {
        x = substr( $0, 7 )
        gsub( "=", " ", x )
        print "vpath %." x
    }
    else
    if( $0 ~ /^\.[a-z]*\.[a-z]*:/ )                 # .dep.tar:  -->  %.tar: %.dep
    {
        m = match( substr( $0, 2 ), "\\." )
        depend = substr( $0, 2, m - 1 )
        target = substr( $0, m + 2 )
        gsub( "[ :]", "", target )
        print( "%." target ": %." depend )
    }
    else
    if( $0 ~ /^ / )
    {
        print "\t" substr( $0, 2 )
    }
    else
    {
        print;
    }
}    
